<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="couponSetting">

	
	<select id="couponSet" resultType="kiosk.adminVO.CouponSettingVO" >
		SELECT c.couponSettingIdx, c.couponSettingName,  p.productName, c.couponSettingRate, c.couponSettingFixed,
        c.couponSettingGrade, c.couponSettingStatus
		FROM kiosk.couponSetting AS c
		INNER JOIN kiosk.product p ON p.productIdx = c.productIdx
		ORDER BY 
        CASE 
        WHEN couponSettingGrade = 'silver' THEN 1
        WHEN couponSettingGrade = 'gold' THEN 2
        WHEN couponSettingGrade = 'platinum' THEN 3
        WHEN couponSettingGrade = 'diamond' THEN 4
        END;
	</select>


	<update id="updateCouponSet" parameterType="kiosk.adminVO.CouponSettingVO">
		UPDATE couponSetting
		SET
		couponSettingRate = #{couponSettingRate},
		couponSettingFixed = #{couponSettingFixed},
		couponSettingStatus = #{couponSettingStatus}
		
		WHERE 
		couponSettingIdx = #{couponSettingIdx}
	</update>
</mapper>