<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="adminOrderList">

	<resultMap type="kiosk.vo.OrderVO" id="orderMap">
		<id column="orderIdx" property="orderIdx"/>
	  	<result column="userIdx" property="userIdx"/>
	  	<result column="productIdx" property="productIdx"/>
	  	<result column="coupunIdx" property="coupunIdx"/>
	  	<result column="option1Idx" property="option1Idx"/>
	  	<result column="option2Idx" property="option2Idx"/>
	  	<result column="orderNumber" property="orderNumber"/>
	  	<result column="orderProductCategory" property="orderProductCategory"/>
		<result column="orderCount" property="orderCount"/>
		<result column="orderStatus" property="orderStatus"/>
		<result column="orderCalorie" property="orderCalorie"/>
		<result column="orderDate" property="orderDate"/>
		<result column="orderPrice" property="orderPrice"/>
	</resultMap>


	<!-- 주문내역 불러오기 -->
	<select id="orderList" resultMap="orderMap">
		SELECT o.orderNumber, o.orderPrice, o.orderProductCategory, o.orderStatus, o.productIdx, c.couponName, p.productIdx
		From `order` o INNER JOIN coupon c ON o.userIdx = c.userIdx
		INNER JOIN product p ON o.productIdx = p.productIdx
		WHERE DATE(o.orderDate) = CURDATE()
		ORDER BY o.orderStatus ASC, o.orderNumber DESC
	</select>

</mapper>